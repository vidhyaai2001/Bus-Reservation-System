<%= form_with(url: new_bus_reservation_path(@bus), method: :get, class: 'mt-3') do |form| %>
  <div class="form-row">
    <div class="form-group col-md-4">
      <%= form.label :date, class: 'font-weight-bold' %>
      <%= form.date_field :date, class: 'form-control', onchange: 'this.form.submit();' %>
    </div>
  </div>
<% end %>

<%= form_with(model: [@bus, @reservation], local: true) do |form| %>
  <!-- Other form fields and labels can be added as needed -->

  <%= form.hidden_field :reservation_date, value: params[:date] %>

  <div class="seat-grid mt-4">
    <% @bus.seats.each do |seat| %>
      <div class="seat-checkbox form-check form-check-inline">
        <% seat_reserved = @reservations.any? { |r| r.seat_id == seat.id } %>
        <% checkbox_options = { class: 'form-check-input', multiple: true, checked: seat_reserved ? 'checked' : false, disabled: seat_reserved } %>
        <%= form.check_box :seat_id, checkbox_options, seat.id, nil %>
        <%= form.label :seat_id, seat.seat_number, class: 'form-check-label' %>
      </div>
    <% end %>
  </div>

  <div class="mt-3">
    <%= form.submit "Book Seat", class: 'btn btn-primary' %>
  </div>
<% end %>

<style> 
  /* Add any additional CSS styles as needed */
  h1 {
    color: #333;
  }

  .seat-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-gap: 10px;
  }

  .seat-checkbox {
    display: flex;
    align-items: center;
  }

  label {
    margin-left: 5px;
  }
</style>











<!-- <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<%= form_with(url: new_bus_reservation_path(@bus), method: :get, id: 'reservation-form', class: 'mt-3') do |form| %>
  <div class="form-row">
    <div class="form-group col-md-4">
      <%= form.label :date, class: 'font-weight-bold' %>
      <%= form.date_field :date, id: 'selected-date', class: 'form-control' %>
    </div>
  </div>
<% end %> 

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Attach a change event listener to the date field
    $('#selected-date').change(function() {
      // Submit the form when the date is selected
      $('#reservation-form').submit();
    });
  });
</script> -->